<Window x:Class="DigitalisationERP.Desktop.Views.EditProductionLineLinksDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="Edit Line Links" Height="640" Width="720"
        WindowStartupLocation="CenterOwner"
        TextElement.Foreground="{DynamicResource MaterialDesignBody}"
        Background="{DynamicResource MaterialDesignPaper}"
        FontFamily="{materialDesign:MaterialDesignFont}">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="0" Text="Line Links (Output + Inputs)"
                   Style="{StaticResource MaterialDesignHeadline5TextBlock}"
                   Margin="0,0,0,16"/>

        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel VerticalAlignment="Top">

                <TextBox x:Name="LineIdTextBox"
                         materialDesign:HintAssist.Hint="Line ID"
                         Style="{StaticResource MaterialDesignOutlinedTextBox}"
                         IsReadOnly="True"
                         Margin="0,0,0,12"/>

                <TextBox x:Name="LineNameTextBox"
                         materialDesign:HintAssist.Hint="Line Name"
                         Style="{StaticResource MaterialDesignOutlinedTextBox}"
                         Margin="0,0,0,12"/>

                <TextBox x:Name="DescriptionTextBox"
                         materialDesign:HintAssist.Hint="Description"
                         Style="{StaticResource MaterialDesignOutlinedTextBox}"
                         AcceptsReturn="True"
                         Height="80"
                         TextWrapping="Wrap"
                         Margin="0,0,0,12"/>

                <CheckBox x:Name="IsActiveCheckBox"
                          Content="Line is active"
                          IsChecked="True"/>

                <Separator Margin="0,16,0,16"/>

                <TextBlock Text="Output (Finished Product)" FontWeight="Bold" FontSize="14" Margin="0,0,0,8"/>

                <Grid Margin="0,0,0,12">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <TextBox x:Name="OutputMaterialNumberTextBox"
                             Grid.Column="0"
                             materialDesign:HintAssist.Hint="Material Number (PF1, PF2, ...)"
                             Style="{StaticResource MaterialDesignOutlinedTextBox}"
                             Margin="0,0,8,8"/>

                    <TextBox x:Name="OutputUnitOfMeasureTextBox"
                             Grid.Column="1"
                             materialDesign:HintAssist.Hint="Unit (PC, KG, ...)"
                             Style="{StaticResource MaterialDesignOutlinedTextBox}"
                             Margin="8,0,0,8"/>

                    <TextBox x:Name="OutputMaterialDescriptionTextBox"
                             Grid.Column="0"
                             Grid.Row="1"
                             materialDesign:HintAssist.Hint="Description"
                             Style="{StaticResource MaterialDesignOutlinedTextBox}"
                             Margin="0,0,8,0"/>

                    <TextBox x:Name="OutputInitialStockTextBox"
                             Grid.Column="1"
                             Grid.Row="1"
                             materialDesign:HintAssist.Hint="Initial Stock (optional)"
                             Style="{StaticResource MaterialDesignOutlinedTextBox}"
                             Margin="8,0,0,0"/>
                </Grid>

                <TextBlock Text="Inputs (Raw Materials)" FontWeight="Bold" FontSize="14" Margin="0,0,0,8"/>

                <Button Style="{StaticResource MaterialDesignOutlinedButton}" Click="AddInput_Click" HorizontalAlignment="Left" Margin="0,0,0,8">
                    <StackPanel Orientation="Horizontal">
                        <materialDesign:PackIcon Kind="Plus" Margin="0,0,8,0"/>
                        <TextBlock Text="Add Input"/>
                    </StackPanel>
                </Button>

                <DataGrid ItemsSource="{Binding Inputs}"
                          AutoGenerateColumns="False"
                          CanUserAddRows="False"
                          HeadersVisibility="Column"
                          RowHeight="34"
                          Height="220">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Material" Binding="{Binding MaterialNumber, UpdateSourceTrigger=PropertyChanged}" Width="*"/>
                        <DataGridTextColumn Header="Description" Binding="{Binding Description, UpdateSourceTrigger=PropertyChanged}" Width="2*"/>
                        <DataGridTextColumn Header="Init Stock" Binding="{Binding InitialStockQuantity, UpdateSourceTrigger=PropertyChanged}" Width="*"/>
                        <DataGridTextColumn Header="Qty/Unit" Binding="{Binding QuantityPerUnit, UpdateSourceTrigger=PropertyChanged}" Width="*"/>
                        <DataGridTextColumn Header="UoM" Binding="{Binding UnitOfMeasure, UpdateSourceTrigger=PropertyChanged}" Width="*"/>
                        <DataGridTemplateColumn Header="" Width="60">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Style="{StaticResource MaterialDesignToolButton}" Click="RemoveInput_Click" Tag="{Binding}">
                                        <materialDesign:PackIcon Kind="Delete" Width="18" Height="18"/>
                                    </Button>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>

            </StackPanel>
        </ScrollViewer>

        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,20,0,0">
            <Button Content="CANCEL" Width="100"
                    Style="{StaticResource MaterialDesignOutlinedButton}"
                    Click="Cancel_Click"
                    Margin="0,0,10,0"/>
            <Button Content="SAVE" Width="120"
                    Style="{StaticResource MaterialDesignRaisedButton}"
                    Click="Save_Click"/>
        </StackPanel>
    </Grid>
</Window>
